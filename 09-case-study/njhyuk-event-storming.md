# 이벤트 스토밍

[\[MSA\] 이벤트 스토밍\(Event storming\)](https://devlos.tistory.com/54)

## 정의
**이벤트 스토밍(Event Storming)**은 서비스와 관계 있는 모든 이해관계자들이 서로가 가지고 있는 생각을 공유하며 서비스에서 발생하는 **이벤트를 중심(Event-First)**으로 분석하는 기법

## 구성요소
* 도메인 이벤트 : 도메인에서 실제로 발생하는 “**결과”**
* 커맨드 : 도메인에서 특정 주체가 요청하는 “**행위**”
* 액터 : 커맨드를 발생시키는 “**주체**”
* 정책 : 이벤트 조건에 따라 자동 실행되는 “**새로운 커맨드**”
* 어그리게이트 : 도메인 이벤트와 커맨드가 처리하게되는 “**데이터**”
* 바운디드 컨텍스트 : “**도메인**” 그 자체, 마이크로 서비스 

## 진행 순서
* 도메인 이벤트(Domain Event) 도출
* 이벤트에 따른 정책(Policy) 도출
* 커맨드(Command)와 액터(Actor) 식별
* 어그리게이트(Aggregate) 매핑
* 바운디드 컨텍스트(Bound Context) 식별
* 컨텍스트 매핑(Context Mapping)

## 간단 시연
권한은 필요하신분 나중에 드릴게여..
https://www.figma.com/board/95Ki7hbfNXTDCReeNrjUO9/%EC%9D%B4%EB%B2%A4%ED%8A%B8-%EC%8A%A4%ED%86%A0%EB%B0%8D-%EC%8B%9C%EC%97%B0?node-id=0-1&p=f&t=ZjPT6oOKhkdMptkM-0
* 사용자는 상점에 단골을 맺을 수 있다
* 사용자는 상점에 방문하면 스탬프를 받는다
* 사용자는 상점에 단골을 해제하면 스탬프를 잃는다
* 스탬프를 받거나 잃으면 멤버십 등급이 조정된다
* 사장님은 스탬프 개수에 따른 멤버십 등급을 설정할 수 있다


## 후기
* 같이 이상한걸 하자고 할때 해보자는 팀원 마인드 선행 필요
* 기획서는 흩어져있는데 스토밍 문서는 한판에 볼 수 있음
* 개발자마다 기획서 보고 서로 다르게 도메인을 이해하는 문제가 줄어듦
* 복잡한 연관관계가 많다는걸 알게됨
* 개발하면서 다시 스토밍 문서 수정하는 사이클을 갖게됨
* 툴은 피그잼이 실시간 편집이 좋음
* 클래스 상속, 시퀀스 다이어그램도 다 넣고싶은 욕구가 생기는것 주의
* 자연스럽게 이벤트 주도로 설계하게됨
