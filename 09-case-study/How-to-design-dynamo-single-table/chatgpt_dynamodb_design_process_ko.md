# 🤖 ChatGPT와 함께한 DynamoDB 블로그 시스템 설계기

> ChatGPT를 설계 파트너로 삼아 DynamoDB 기반 실전 시스템을 어떻게 설계했는지 공유합니다.  
> 점진적으로 질문하고 개선하면서 단일 테이블 설계를 완성한 여정을 기록합니다.

---

## 🧭 목표

다음과 같은 요구사항을 가진 백엔드 시스템을 만들고자 했습니다:

- 블로그 글과 댓글을 DynamoDB에 저장
- **카테고리(category)**별로 블로그 글을 조회
- 각 글에 달린 **댓글도 함께** 가져오기
- **한 번의 Query API 호출**로 전체 데이터 가져오기
- **페이징(pagination)** 지원
- **30일 TTL(Time-to-Live)** 적용

---

## 🗣️ ChatGPT와 함께한 설계 대화 흐름

처음부터 완성된 설계를 요청하기보다는, **질문 → 답변 → 반박 → 개선**의 흐름으로 점진적으로 설계를 완성했습니다.

---

### 1. **문제 정의부터 시작**

가장 처음에는 현실적인 요구 상황을 간단하게 제시했습니다:

> "Blog와 Comment을 DynamoDB 단일 테이블에 저장하려고 해. Blog는 여러 Item으로 구성되고, Blog를 조회하면 Item도 함께 꺼내와야 해."

🧠 이렇게 하면 **조회 패턴을 중심으로 데이터 모델링**하는 DynamoDB 방식에 맞는 구조를 끌어낼 수 있습니다.

---

### 2. **쿼리 효율성 검증**

기본 PK/SK 설계를 받은 뒤, 다음과 같이 물었습니다:

> "Blog가 1000개고 각 Blog에 Item이 100개면 쿼리가 1001번 필요하잖아?"

💡 이 질문을 통해 **단순 구조의 비효율**을 드러내고, 설계 개선 방향을 얻었습니다.

---

### 3. **쿼리 패턴 최적화 시도**

> "카테고리별로 글과 댓글을 한 번에 가져오려면 어떻게 설계해야 해?"

ChatGPT는 SK에 다음과 같은 구조를 넣자고 제안했습니다:

```
2025-05-22T10:00:00Z#BLOG#123#META
2025-05-22T10:00:00Z#BLOG#123#COMMENT#001
```

즉, **정렬 키를 이용해서 블로그와 댓글이 연속적으로 정렬되도록 설계**하는 것이었습니다.

---

### 4. **복잡한 조건 추가**

> "카테고리별로 최신순으로 블로그 글과 댓글을 한 번에 가져오고 싶어. 페이징도 해야 해."

ChatGPT는:

- SK를 ISO 시간 + postId 기반으로 구성
- 앱에서 postId 기준으로 group-by 처리
- 마지막 Blog가 잘리면 다음 페이지에서 이어붙이기

같은 해결책을 제안했습니다.

---

### 5. **S3, GSI, JSON 저장 비교 질문**

> "그냥 댓글을 S3에 넣고 링크만 Dynamo에 두는 건 어때?"

ChatGPT는 다음과 같은 이유로 반대했습니다:

- S3는 지연이 크고 실시간 조회에 적합하지 않음
- TTL/정렬/페이징이 어려움

→ 결국 SK로 그룹핑하는 Dynamo 구조가 가장 적절하다는 판단에 도달했습니다.

---

### 6. **문서화 요청**

마지막으로 다음 요청들을 했습니다:

- Technical Decision Document 생성
- 영어/한글 버전 정리
- MySQL vs Dynamo 비교 블로그 포스트 작성
- Markdown + 다이어그램 + 코드 블록 포함

---

## 🧵 대화 흐름 요약

| 단계 | 질문 방식 | ChatGPT의 역할 |
|------|-----------|----------------|
| 요구 정의 | 현실적인 시나리오 설명 | PK/SK 모델링, Query 설계 |
| 성능 분석 | "이러면 느려지지 않아?" | 비효율 지적 및 개선안 제시 |
| 도메인 변경 | Blog → Blog/Comment | 설계 재활용 및 일반화 |
| 코드 요청 | Java 코드 생성 요청 | AWS SDK 기반 코드 생성 |
| 복잡도 추가 | 페이징, TTL, GSI 추가 | 설계 확장 및 최적화 |
| 구조 비교 | S3 vs GSI vs Embedded | 아키텍처 선택 가이드 |
| 문서 요청 | 기술 문서 및 블로그 양식 | 정리, 문서화 지원 |

---

## ✍️ 마무리

ChatGPT를 단순한 코드 생성기가 아니라, **함께 설계하는 파트너**처럼 활용하면:

- 문제를 단계적으로 나누고
- 중간마다 검증하면서
- 현실적인 제약을 반영한 설계
- 문서화까지 손쉽게 처리할 수 있습니다.

이건 마치 **백보드 앞에서 함께 설계하는 페어 프로그래밍**처럼 느껴졌습니다.

---

## ✅ 다른 사람들을 위한 팁

ChatGPT로 설계할 때는 이렇게 해보세요:

- 처음부터 완성된 걸 묻기보다, **작게 쪼개서 질문**하기
- "그럼 이런 경우는?" 하고 **What If 질문** 자주 던지기
- 정답 요구보다 **함께 판단하고 토론**하는 태도
- 중간중간 **정리와 문서화 요청**을 활용하기

👉 그러면 단순한 답변이 아니라, **함께 일하는 엔지니어** 같은 느낌을 받을 수 있어요.

