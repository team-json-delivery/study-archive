# Chapter 5. Sharding
* MySQLì˜ ë‹¨ì¼ ì¸ìŠ¤í„´ìŠ¤ì—ì„œ ì„±ëŠ¥ì€ ì¿¼ë¦¬,ë°ì´í„°, ì ‘ê·¼ íŒ¨í„´, í•˜ë“œì›¨ì–´ì— ë‹¬ë ¸ë‹¤.
* ë” ì´ìƒ ë°©ë²•ì´ ì—†ë‹¤ë©´ ë‹¨ì¼ ì¸ìŠ¤í„´ìŠ¤ì˜ MySQL ì„±ëŠ¥ì´ í•œê³„ì— ë„ë‹¬í–ˆë‹¤ë©´..
* ì—¬ëŸ¬ ë°ì´í„°ë² ì´ìŠ¤ì— ì›Œí¬ë¡œë“œë¥¼ ë¶„ì‚¬ë‚˜ì—¬ ì„±ëŠ¥ì„ í–¥ìƒì‹œí‚¤ëŠ” ìƒ¤ë”©ì„ ê³ ë ¤í•´ì•¼ í•œë‹¤
## Why a Single Database Does Not Scale
* ì• í”Œë¦¬ì¼€ì´ì…˜ ì›Œí¬ë¡œë“œëŠ” ë‹¨ì¼ ì„œë²„ì˜ ì†ë„ì™€ ìš©ëŸ‰ì„ í¬ê²Œ ì•ì§€ë¥¼ ìˆ˜ ìˆë‹¤
### Application Workload
* ì•„ë¬´ëŸ° ë¶€í•˜ê°€ ì—†ëŠ” ê²½ìš° í•˜ë“œì›¨ì–´ì— ì•„ë¬´ê²ƒë„ ì—†ë‹¤ê³  ê°€ì €í•˜ì
* ![img.png](img.png)
* ê·¸ëŸ¬ë‚˜ ì‹¤ì œë¡œëŠ” ì•„ë˜ì™€ ê°™ì´ query, ì ‘ê·¼ íŒ¨í„´, ë°ì´í„° ë“±ìœ¼ë¡œ ì¸í•´ í•˜ë“œì›¨ì–´ê°€ ì‚¬ìš©ëœë‹¤
* ![img_1.png](img_1.png)
* ë°ì´í„°ë¥¼ ì €ì¥í•˜ê¸°ì— ì¶©ë¶„í•œ ì›Œí¬ë¡œë“œê°€ ìˆë”ë¼ë„ ë°ì´í„°ë§Œ ìˆëŠ”ê²ƒì€ ì•„ë‹ˆë‹¤
* ![img_2.png](img_2.png)
* ë°ì´í„°ëŠ” ì›Œí¬ë¡œë“œì˜ í•œ ë¶€ë¶„ì¼ ë¿ì´ë¯€ë¡œ ì¿¼ë¦¬ì™€ ì ‘ê·¼ íŒ¨í„´ì„ ê³ ë ¤í•˜ë©´ ë§ì€ ë°ì´í„°ê°€ ìˆëŠ” ë‹¨ì¼ ì„œë²„ì—ì„œ í˜„ì‹¤ì ìœ¼ë¡œ ìˆ˜ìš© ê°€ëŠ¥í•œ ìˆ˜ì¤€ì€ ì•„ë˜ì™€ ê°™ë‹¤
* ![img_3.png](img_3.png)
### Benchmarks Are Synthetic
* ë²¤ì¹˜ë§ˆí‚¹ì€ ì‹¤í—˜ì ì¸ ì‘ì—…ì´ë©° ì‹¤ì œ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ë™ì‘í•˜ëŠ” íŠ¹ì„±ê³¼ ì™„ë²½í•˜ê²Œ ë§¤ì¹­ë˜ì§€ ì•ŠëŠ”ë‹¤
### Writes
* ì“°ê¸°ëŠ” ë‹¨ì¼ MySQLì—ì„œ í™•ì¥ì´ ì–´ë µë‹¤
#### Single writable (source) instance
* í”„ë¡œë•ì…˜ì—ì„œ MySQLì€ ê³ ê°€ìš©ì„±ì„ ìœ„í•´ ë³µì œ topologyì— ì—°ê²°ëœ ì—¬ëŸ¬ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì‚¬ìš©í•˜ëŠ”ë°
* write conflictìœ¼ë¡œ ì¸í•´ ì“°ê¸°ëŠ” ë‹¨ì¼ ì“°ê¸°ë¡œ ì œí•œëœë‹¤
#### Transactions and locking
* íŠ¸ëœì­ì…˜ì„ ìœ„í•´ low lockì„ íšë“í•´ì•¼ í•˜ë©° ë–„ë¡œëŠ” ì˜ˆìƒë³´ë‹¤ ë” ë§ì€ í–‰ì„ ì ê·¼ë‹¤
* ê°™ì€ ë°ì´í„°ì— ëŒ€í•œ ì“°ê¸° ì‘ì—…ì´ ë§ì€ ì›Œí¬ë¡œë“œë¼ë©´ ì–´ë–¤ í•˜ë“œì›¨ì–´ë„ ê°ë‹¹í•  ìˆ˜ ì—†ë‹¤
#### Page flushing (durability)
* page flushingì€ ë°ì´í„°ë¥¼ persists í•˜ê¸° ìœ„í•´ ì‚¬ìš©ëœë‹¤
* ì„±ëŠ¥ì˜ ë³‘ëª©ì´ ë˜ë©° MySQLì€ ë§¤ìš° íš¨ìœ¨ì ì´ì§€ë§Œ ë°ì´í„°ê°€ ë””ìŠ¤í¬ì— ìœ ì§€ë˜ë„ë¡ ë³´ì¥í•´ì•¼ í•˜ë¯€ë¡œ ë³¸ì§ˆì ìœ¼ë¡œ í”„ë¡œì„¸ìŠ¤ê°€ ëŠë¦¬ë‹¤
#### Write amplification
* í•„ìš” ì´ìƒì˜ ë¶€ê°€ì ì¸ ì“°ê¸°ê°€ ìˆëŠ” ê²½ìš° (ì„¸ì»¨ë”ë¦¬ ì¸ë±ìŠ¤ê°€ 10ê°œê°€ ìˆë‹¤ë©´, ì“°ê¸°ë¥¼ 10ë°° í•´ì•¼ í•  ìˆ˜ë„ ìˆë‹¤)
#### Replication
* MySQLì€ asynchronous, semsynchronous, group replicationsì„ ì§€ì›í•œë‹¤.
* asynchronousëŠ” íŠ¸ëœì­ì…˜ì„ ì»¤ë°‹í•  ë•Œ í”ŒëŸ¬ì‹± ë˜ë¯€ë¡œ ì“°ê¸° ì„±ëŠ¥ì— ì•½ê°„ì˜ ì˜í–¥ì„ ë¯¸ì¹˜ì§€ë§Œ ê·¸ í›„ì—ëŠ” ì˜í–¥ì´ ì—†ë‹¤
* semisynchronousëŠ” ëª¨ë“  ì»¤ë°‹ì„ í•˜ë‚˜ ì´ìƒì˜ ë³µì œë³¸ì—ì„œ ì¸ì§€í•´ì•¼ í•˜ë¯€ë¡œ ë„¤íŠ¸ì›Œí¬ ëŒ€ê¸° ì‹œê°„ì— ëŒ€í•œ íŠ¸ëœì­ì…˜ ì²˜ë¦¬ëŸ‰ì„ ë–¨ì–´ëœ¨ë¦°ë‹¤
* groupì€ ë” ì‹¬í•˜ë‹¤(7ì¥ì—ì„œ ì„¤ëª…)
### Schema Changes
* ìŠ¤í‚¤ë§ˆ ë³€ê²½ì€ ì •ê¸°ì ì¸ ì‘ì—… ì´ìƒìœ¼ë¡œ í•„ìˆ˜ ì‘ì—…ì´ë‹¤
* ë‹¨ì¼ í…Œì´ë¸”ì„ ì—„ì²­ë‚œ í¬ê¸°ë¡œ í™•ì¥í•˜ëŠ”ë° ì„±ê³µí•˜ë”ë¼ë„ í…Œì´ë¸”ì˜ ë³€ê²½ì— í•„ìš”í•œ ì‹œê°„ì€ ê°ë‹¹í•  ìˆ˜ ì—†ì„ ê²ƒì´ë‹¤
* ì—”ì§€ë‹ˆì–´ê°€ ìŠ¤í‚¤ë§ˆë¥¼ ë³€ê²½í•˜ê¸° ìœ„í•´ ë©°ì¹  ë˜ëŠ” ëª‡ ì£¼ë¥¼ ê¸°ë‹¤ë¦´ ìˆ˜ ì—†ìœ¼ë¯€ë¡œ ê·œëª¨ì— ë§ëŠ” MySQL ìƒ¤ë”©ì´ í•„ìš”í•˜ë‹¤
### Operations
* ë°±ì—…ê³¼ ë³µì›, ì‹¤íŒ¨í•œ ì¸ìŠ¤í„´ìŠ¤ ì¬êµ¬ì¶•, MySQL ì—…ë¥´ë°ì´ë“œ, ì¢…ë£Œ, ì‹œì‘, ì¶©ëŒ ë³µêµ¬
* ìœ„ ì‘ì—…ë“¤ì€ ì§€ê¸ˆê¹Œì§€ ì–¸ê¸‰í•˜ì§€ ì•Šì•˜ì§€ë§Œ MySQLì— í•„ìš”í•œ ì‘ì—…ì´ë©° í´ìˆ˜ë¡ ë” ì˜¤ë˜ ê±¸ë¦°ë‹¤
* Database ê´€ë¦¬ìë“¤ì´ ëŠ¥ìˆ™í•˜ì§€ ì•Šê³  í—Œì‹ ì ì´ì§€ë„ ì•Šë‹¤ë©´, ë§ì€ ì˜í–¥ì„ ì¤„ ê²ƒì´ë‹¤
## Pebbles, Not Boulders
* ë°”ìœ„ë³´ë‹¤ ì¡°ì•½ëŒì„ ì˜®ê¸°ëŠ” ê²ƒì´ ì‰½ë‹¤
* í•˜ë“œì›¨ì–´ê°€ ìˆ˜ìš©í•  ìˆ˜ ìˆëŠ” ì„±ëŠ¥ìœ¼ë¡œ ì‹¤í–‰ë˜ê±°ë‚˜, í‘œì¤€ ì‘ì—…ì— í—ˆìš© ë²”ìœ„ì˜ ì‹œê°„ì´ ì†Œìš”ëœë‹¤ë©´ ì‘ë‹¤ê³  í•  ìˆ˜ ìˆë‹¤
* ì €ìì˜ ì œì•ˆì€ 2TB/4TBë¡œ ì œí•œí•˜ëŠ” ê²ƒì´ë‹¤
  * 2TB : ìƒìš© í•˜ë“œì›¨ì–´ì—ì„œ í‰ê· ì ì¸ ìˆ˜ì¤€ì˜ ìˆ˜ìš© ê°€ëŠ¥í•œ ì„±ëŠ¥ê³¼ operationì´ í•©ë¦¬ì ì¸ ì‹œê°„ë‚´ì— ì™„ë£Œëœë‹¤
  * 4TB : ì¤‘ê³ ê¸‰ í•˜ë“œì›¨ì–´ì—ì„œ ë§¤ìš° ë†’ì€ ì„±ëŠ¥ì„ ë°œíœ˜í•˜ì§€ë§Œ operationì€ ì•½ê°„ ì‹œê°„ì´ ê±¸ë¦´ ìˆ˜ ìˆë‹¤
## Sharding: A Brief Introduction
* ìƒ¤ë”© ë°©ë²•ê³¼ êµ¬í˜„ì€ ì• í”Œë¦¬ì¼€ì´ì…˜ ì›Œí¬ë¡œë“œì™€ ê²°í•©ëœë‹¤
#### Designing a new application for sharding
* ì²˜ìŒë¶€í„° ìƒ¤ë”©ì„ ê³ ë ¤í•˜ì—¬ ì„¤ê³„ëœ ê²½ìš°
* í–¥í›„ 4ë…„ì˜ ë°ì´í„° í¬ê¸°ì™€ ì¦ê°€ìœ¨ì„ ì¶”ì •í•´ë³´ì
* 4ë…„ ì•ˆì— ë„ë‹¬í•˜ì§€ ì•ŠëŠ”ë‹¤ë©´ ìƒ¤ë”©ì´ í•„ìš”í•˜ì§€ ì•Šì„ ìˆ˜ ìˆë‹¤
  * RSUê°€ 4ë…„, ì¸ë ¥ì˜ ì´ë™ì´ ë°œìƒí•  ê°€ëŠ¥ì„±ì´ ë†’ë‹¤
* ë°ì´í„° ì„¸íŠ¸ê°€ ë¬´ì œí•œì¸ì§€ ì œí•œì´ ìˆëŠ”ì§€
  * ë¬´ì œí•œìœ¼ë¡œ ì»¤ì§€ë„ë¡ ë‘ì§€ ë§ì, ë¬´ì œí•œ ë°ì´í„°ëŠ” ìƒ¤ë”©ì´ í•„ìš”í•¨ì„ ê°•í•˜ê²Œ ì‹œì‚¬í•œë‹¤
#### Migrating an existing application to sharding
* ë§ˆì´ê·¸ë ˆì´ì…˜ì€ ìƒ¤ë”© ì†”ë£¨ì…˜ê³¼ ì• í”Œë¦¬ì¼€ì´ì…˜ ì›Œí¬ë¡œë“œì— ë”°ë¼ ë‹¬ë¼ì§„ë‹¤
* ì›ë³¸ì—ì„œ ìƒˆ ìƒ¤ë“œë¡œ ì—¬ëŸ¬ë²ˆ ë³µì‚¬ê°€ ì´ë£¨ì–´ì§ˆ ê²ƒì´ë©°, ì´ˆê¸° ë§ˆì´ê·¸ë ˆì´ì…˜ì€ ê·¼ë³¸ì ìœ¼ë¡œ ë¦¬ìƒ¤ë”©ì´ ëœë‹¤
* ìƒ¤ë”©ì„ ì‹œì‘í•˜ë ¤ë©´ ìƒ¤ë“œ í‚¤ì™€ ì „ëµì„ ì„¸ìš°ê³  ë¬¸ì œë¥¼ ì´í•´í•´ì•¼ í•œë‹¤
### Shard Key
* MySQL ë¶„í• ì€ í”„ë¡œê·¸ë˜ë° ë°©ì‹ìœ¼ë¡œ ë°ì´í„°ë¥¼ ìƒ¤ë“œì— ë§¤í•‘í•´ì•¼ í•œë‹¤
* ê°€ì¥ ê·¼ë³¸ì ì¸ ê²°ì •ì€ ë°ì´í„°ë¥¼ ë¶„í• í•˜ëŠ” ë° ì‚¬ìš©í•  ìƒ¤ë“œ í‚¤ê°€ ëœë‹¤
* ì´ìƒì ì¸ ìƒ¤ë“œ í‚¤ëŠ” 3ê°€ì§€ ì†ì„±ì´ ìˆë‹¤
#### High cardinality
* ì¹´ë””ë„ë¦¬í‹°ê°€ ë†’ì•„ ë°ì´í„°ê°€ ìƒ¤ë“œ ì „ì²´ì— ê³ ë¥´ê²Œ ë¶„ì‚°ëœë‹¤
#### Reference application entities
* ì ‘ê·¼ íŒ¨í„´ì´ ìƒ¤ë“œë¥¼ êµì°¨í•˜ì§€ ì•Šë„ë¡ ì• í”Œë¦¬ì¼€ì´ì…˜ ì—”í‹°í‹°ë¥¼ ì°¸ì¡°í•œë‹¤
  * ê²°ì œ ì €ì¥ì†Œë¼ë©´ ê³ ê°ë³„ ë°ì´í„°ë¥¼ ê¸°ì¤€ìœ¼ë¡œ ìƒ¤ë”©ì„ í•˜ëŠ”ê²ƒì´ ì´ìƒì ì´ë‹¤
#### Samll
* ì‚¬ìš©ëŸ‰ì´ ë§ìœ¼ë¯€ë¡œ ë  ìˆ˜ ìˆëŠ” í•œ ì‘ì•„ì•¼ í•œë‹¤
### Strategies
* ìƒ¤ë”© ì „ëµì€ ìƒ¤ë“œ í‚¤ê°’ì„ ê¸°ì¤€ìœ¼ë¡œ ë°ì´í„°ë¥¼ ìƒ¤ë“œì— ë§¤í•‘í•œë‹¤
* ìƒ¤ë“œ í‚¤ì™€ ì „ëµì´ êµ¬í˜„ë˜ë©´ ë³€ê²½í•˜ê¸°ê°€ ë§¤ìš° ì–´ë ¤ìš°ë¯€ë¡œ ì‹ ì¤‘í•˜ê²Œ ì„ íƒí•´ì•¼ í•œë‹¤
* í•´ì‰¬, ë²”ìœ„, ì¡°íšŒì™€ ê´€ë ¨í•´ ì¼ë°˜ì ì¸ 3ê°€ì§€ ì „ëµì´ ìˆë‹¤
#### Hash
* í•´ì‹œ í‚¤ê°’ì„ ìƒ¤ë“œì— ë§¤í•‘í•˜ëŠ” ë°©ì‹
* ![img_4.png](img_4.png)
* ìƒ¤ë“œ ìˆ˜ë¥¼ ë³€ê²½í•˜ë©´ ì˜í–¥ ë°›ì„ ìˆ˜ ìˆë‹¤
  * consistent hashing algorithmì„ í†µí•´ í•´ì†Œ ê°€ëŠ¥
* ë°ì´í„°ì˜ ì¬ë°°ì¹˜ê°€ ì–´ë µë‹¤
* Point access : ğŸŸ¢
* Range access : âœ–
* Random access : âœ–
#### Range
* ì—°ì†ì ì¸ í‚¤ê°’ì˜ ë²”ìœ„ë¥¼ ì •ì˜í•˜ê³  ê° ë²”ìœ„ë¥¼ ìƒ¤ë“œì— ë§¤í•‘
* ![img_5.png](img_5.png)
* í‚¤ê°’ ë²”ìœ„ëŠ” ë¯¸ë¦¬ ì •ì˜í•´ì•¼ í•˜ë©° ì´ë¥¼ ìœ„í•´ data distributionì— ëŒ€í•œ ì§€ì‹ì´ í•„ìš”í•˜ë‹¤
* Hash ìƒ¤ë”©ê³¼ ë‹¬ë¦¬ ë²”ìœ„ë¥¼ ë³€ê²½(ì¬ì •ì˜) í•  ìˆ˜ ìˆì–´ ë°ì´í„°ë¥¼ ìˆ˜ë™ìœ¼ë¡œ ì¬ë°°ì¹˜í•˜ëŠ” ë° ë„ì›€ì´ ëœë‹¤
* í‚¤ì˜ ë²”ìœ„ê°€ ì œí•œì ì´ê³ , ë²”ìœ„ë¥¼ ì •í•  ìˆ˜ ìˆê³ , ê°’ì˜ ë¶„í¬ë¥¼ ì•Œê³  ìˆìœ¼ë©° ê· ì¼í•˜ë©° ë³€ê²½ë˜ì§€ ì•ŠëŠ”ë‹¤ë©´  range hashê°€ ì í•©í•˜ë‹¤ê³  í•  ìˆ˜ ìˆë‹¤
* Point access : ğŸŸ¢
* Range access : ğŸ”º
* Random access : âœ–
#### Lookup
* Lookup ìƒ¤ë”©ì€ ìƒ¤ë“œì— ìƒ¤ë“œ í‚¤ê°’ì„ ì •ì˜í•œ í…Œì´ë¸”ì— ë§¤í•‘í•˜ëŠ” ê²ƒ
* ![img_6.png](img_6.png)
* ê°€ì¥ ìœ ì—°í•˜ì§€ë§Œ lookup tableì„ ìœ ì§€ë³´ìˆ˜í•´ì•¼ í•œë‹¤
* ì§€ì—­ì˜ ìˆ«ìì™€ ê°™ì´ ì˜ ë³€í•˜ì§€ ì•ŠëŠ” ê²½ìš° ë§¤ìš° ìœ ì—°í•˜ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ì¥ì ì´ ìˆë‹¤
  * > range shadingê³¼ ì•½ê°„ ê²¹ì¹˜ëŠ”ë°
* Point access : ğŸŸ¢
* Range access : ğŸŸ¢
* Random access : ğŸŸ¢
### Challenges
#### Transaction
* íŠ¸ëœì­ì…˜ì€ ì—¬ëŸ¬ ìƒ¤ë“œì— ê±¸ì³ ì‘ë™í•˜ì§€ ì•ŠëŠ”ë‹¤. ë°˜ë“œì‹œ í”¼í•˜ì
#### Join
* SQLë¬¸ì€ ì—¬ëŸ¬ ìƒ¤ë“œì— ê±¸ì³ í…Œì´ë¸”ì„ ì¡°ì¸í•  ìˆ˜ ì—†ë‹¤
#### corss-shard query
* êµì°¨ ìƒ¤ë“œ ì¿¼ë¦¬ë¥¼ ì‚¬ìš©í•˜ë ¤ë©´ ë‘ê°œ ì´ìƒì˜ ìƒ¤ë“œì— ì ‘ê·¼í•´ì•¼ í•œë‹¤.
* ì´ëŠ” ì§€ì—°ì´ ë°œìƒí•˜ë©° ê°€ëŠ¥í•œ í•œ ìƒ¤ë“œì— ì ‘ê·¼í•˜ë„ë¡ í•´ì•¼ í•˜ì§€ë§Œ 
* p2pì™€ ê°™ì´ ë°˜ë“œì‹œ ë‘ê°œ ìƒ¤ë“œì— ì ‘ê·¼í•´ì•¼í•˜ëŠ” ì ‘ê·¼ íŒ¨í„´ì´ ìˆë‹¤ë©´ ìµœì†Œí™”í•˜ë˜ ì œê±°í•˜ë ¤ê³  ì• ë¥¼ ì“°ì§„ ë§ì
* ë‹¤ë§Œ ë¶„ì‚° ì¿¼ë¦¬ì™€ ê°™ì€ ê²½ìš°ëŠ” ë°˜ë“œì‹œ í”¼í•´ì•¼ í•œë‹¤. ì´ê²ƒì€ ìƒ¤ë”©ì— ë°˜í•˜ëŠ” í–‰ìœ„ì´ë‹¤.
* ì ‘ê·¼ íŒ¨í„´ì„ ë³€ê²½í•˜ê±°ë‚˜ ë‹¤ë¥¸ ì†”ë£¨ì…˜ì„ ì‚¬ìš©í•˜ì
#### Resharding
* í•˜ë‚˜ì˜ ìƒ¤ë“œë¥¼ ë‘˜ ì´ìƒì˜ ìƒˆ ìƒ¤ë“œë¡œ ë‚˜ëˆ„ëŠ” ê²ƒ, ë°ì´í„° ì¦ê°€ë¥¼ ìˆ˜ìš©í•˜ëŠ” ë° í•„ìš”í•˜ë©°, ìƒ¤ë“œ ê°„ì˜ ë°ì´í„° ì¬ë¶„ë°°ì—ë„ ì‚¬ìš©ë¨
* ìƒ¤ë”©ì€ ë” ë§ì€ ìƒ¤ë”©ì„ ë‚³ëŠ”ë‹¤ëŠ” ê²ƒì´ ìƒ¤ë”©ì˜ ì–´ë‘ìš´ ë©´ì´ë‹¤
* ë°ì´í„°ë¥¼ ì¤„ì´ê¸° ìœ„í•´ ì• ì“°ì§€ ì•Šì•˜ë‹¤ë©´ ë°˜ë“œì‹œ ë” ë§ì€ ìƒ¤ë“œê°€ í•„ìš”í•  ê²ƒì´ë‹¤
#### Rebalancing
* ì ‘ê·¼ì„ ë” ê· ë“±í•˜ê²Œ í•˜ê¸° ìœ„í•´ ë°ì´í„°ë¥¼ ì¬ë°°ì¹˜ í•˜ëŠ” ê²ƒ
* í•« ìƒ¤ë“œì™€ ê°™ì€ ë¬¸ì œë¥¼ ì²˜ë¦¬í•˜ê¸° ìœ„í•´ í•„ìš”í•˜ë‹¤
* ìƒ¤ë”© ì „ëµì— ë”°ë¼ ë¦¬ë°¸ëŸ°ì‹± ë¬¸ì œ í•´ê²° ë°©ë²•ì´ ë‹¤ë¥¸ë°
  * hash : ì‚¬ì‹¤ìƒ ë¶ˆê°€ëŠ¥
  * range : ë²”ìœ„ë¥¼ ì¬ì •ì˜ í•¨ìœ¼ë¡œì¨ ê°€ëŠ¥í•˜ì§€ë§Œ ë¦¬ìƒ¤ë”©ê³¼ ê°™ì€ ê³¼ì •
  * lookup : ìƒëŒ€ì ìœ¼ë¡œ ì‰½ë‹¤
#### Online schema changes
* OSC ì˜ ê²°ê³¼ë¥¼ ìë™ì ìœ¼ë¡œ ì·¨í•©í•˜ì—¬ ì™„ê²°ë‚´ëŠ” ì˜¤í”ˆì†ŒìŠ¤ê°€ ì—†ë‹¤
## Alternatives
* ìƒ¤ë”©ì€ ë³µì¡í•˜ê³  ì‚¬ìš©ìë‚˜ ê³ ê°ì—ê²Œ ì§ì ‘ì ì¸ ê°€ì¹˜ê°€ ìˆì§€ ì•Šë‹¤
* í™•ì¥ì„±ì„ ìœ ì§€í•˜ëŠ” ê²ƒì€ ì• í”Œë¦¬ì¼€ì´ì…˜ì— ê°€ì¹˜ê°€ ìˆì§€ë§Œ ì—”ì§€ë‹ˆì–´ì—ê²ŒëŠ” ê¹Œë‹¤ë¡œìš´ ì‘ì—…ì´ë‹¤
### NewSQL
* ìŠ¤ì¼€ì¼ì•„ì›ƒì„ ê¸°ë³¸ìœ¼ë¡œ ì§€ì›í•˜ëŠ” ê´€ê³„í˜• ACID í˜¸í™˜ ë°ì´í„° ìŠ¤í† ë¦¬ì§€
  * ì•„ë§ˆë„ NOSQL
* MySQlì´ ê·¸ëŸ¼ì—ë„ ë§ì´ ì‚¬ìš©ë˜ëŠ” ì´ìœ 
#### Maturity
* MySQL ë§Œí¼ì˜¤ëœ ì‹œê°„ ì•ˆì •ë˜ì–´ì˜¨ ìŠ¤í† ë¦¬ì§€ê°€ ì—†ë‹¤
#### SQL compatibility
* SQLì˜ í˜¸í™˜ì„±ì´ ë–¨ì–´ì§€ëŠ” ê²½ìš°ê°€ ë§ìŒ
#### Complex operations
* ë¶„ì‚° ì‹œìŠ¤í…œì˜ ë³µì¡ì„±
#### Distributed system performance
* ë¶„ì‚° ì‹œìŠ¤í…œì˜ ì„±ëŠ¥ì€ ê¸°ë³¸ì ìœ¼ë¡œ ë‹¨ì¼ ë¨¸ì‹ ì— ë¹„í•´ ë‚®ì„ ìˆ˜ ë°–ì— ì—†ë‹¤(íŠ¹íˆ ì‘ë‹µì‹œê°„)
### Middleware
* ProxySQL, Vitessì™€ ê°™ì€ ë¯¸ë“¤ì›¨ì–´ ì†”ë£¨ì…˜ë„ ì¡´ì¬í•˜ë©°, ê²€í† í•  ê°€ì¹˜ê°€ ìˆë‹¤
### Microservices
* ìƒ¤ë”©ì€ ë°ì´í„° í¬ê¸°ì— ì¤‘ì ì„ ë‘”ë‹¤, ê·¸ëŸ¬ë‚˜ ë–„ë¡œ ì‹¤ì œ ë¬¸ì œëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì´ë‹¤
* ëª¨ë†€ë¦¬ì‹ì„ í”¼í•˜ëŠ” ê²ƒì€ í‘œì¤€ì  ì—”ì§€ë‹ˆì–´ë§ ì„¤ê¼ì™€ ê´€í–‰ì´ì§€ë§Œ, í•­ìƒ ê·¸ë ‡ì§€ëŠ” ì•Šë‹¤
* ë§ˆì´í¬ë¡œ ì„œë¹„ìŠ¤ëŠ” ìƒ¤ë”©ë³´ë‹¤ í›¨ì”¬ ì‰½ê²Œ ëª©í‘œì— ë„ë‹¬í•˜ê²Œ ë§Œë“¤ ìˆ˜ ìˆë‹¤
### Donâ€™t Use MySQL
* ë‹¤ë¥¸ ìŠ¤í† ë¦¬ì§€ë‚˜ ê¸°ìˆ ì´ ë” ì˜ ì‘ë™í•  ë•ŒëŠ” MySQLì„ ì‚¬ìš©í•˜ì§€ ë§ì
* ìƒ¤ë”©ì€ í•´ê²°ëœ ë¬¸ì œì´ì§€ë§Œ ê²°ì½” ë¹ ë¥´ê³  ì‰¬ìš´ í•´ê²°ì±…ì€ ì•„ë‹ˆë‹¤
> MySQLì„ ìƒ¤ë”©í•´ì„œ í•´ê²°í•´ì•¼ í•˜ëŠ” ë¬¸ì œëŠ” ëŒ€ë¶€ë¶„ ë‹¤ë¥¸ ìŠ¤í† ë¦¬ì§€ë¡œ í•´ê²°ë˜ì§€ ì•Šì„ê¹Œ?
>
> ì¿¼ë¦¬ê°€ ë³µì¡í•˜ë‹¤ë©´ ìƒ¤ë”©ìœ¼ë¡œë„ (êµì°¨ ìƒ¤ë“œ ì¿¼ë¦¬ì™€ ê°™ì€ ë¬¸ì œ) í•´ê²°ì´ ì–´ë ¤ìš´ ê²½ìš°ê°€ ë§ì„ ê²ƒì´ê³ 
> 
> ê·¸ë ‡ì§€ ì•Šê³  ìƒ¤ë”©ìœ¼ë¡œ ì‰½ê²Œ í’€ìˆ˜ ìˆë‹¤ë©´, ì‚¬ì‹¤ ë³µì¡í•œ ì¿¼ë¦¬ê°€ í•„ìš”ì—†ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ í•´ê²°í•´ì•¼í•  ë¬¸ì œë¥¼ ì¿¼ë¦¬ì— ë¯¸ë£¬ê²ƒì€ ì•„ë‹ê¹Œ
## Summary
* MySQL scales out by sharding.
* Sharding divides one database into many databases.
* A single database does not scale primarily because the combination of queries, data, and access patternsâ€”the application workloadâ€”significantly outpace thespeed and capacity of single-server hardware.
* Itâ€™s significantly easier to manage many small databases (shards) than one huge databaseâ€”pebbles, not boulders.
* Data is sharded (divided) by a shard key, which you must choose carefully.
* The shard key is used with a sharding strategy to map data (by shard key) to shards.
* The most common sharding strategies are hash (a hashing algorithm), range, and lookup (directory).
* Sharding has several challenges that must be addressed.
* There are alternatives to sharding that you should evaluate.
